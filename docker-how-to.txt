This shows how to run docker to test new functions with saltcheck

docker build -t ubuntu16 .

docker run --add-host=salt:127.0.0.1 --rm -itv $(pwd)/saltstack/salt:/srv/salt/ -v $(pwd)/saltstack/pillar:/srv/pillar -v $(pwd)/saltstack/etc/minion:/etc/salt/minion ubuntu16 /bin/bash

# mapping the minion file to /etc/salt/minion means we don't need --local flag

salt-call saltutil.sync_modules

salt-call saltcheck -d

salt-call saltcheck.run_state_tests apache

salt-call saltcheck.run_highstate_tests
