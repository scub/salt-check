This shows how to run docker to test new functions with saltcheck

# now sharing my docker image for saltcheck tests:  wcannon/saltcheck

# First we'll need to build our docker image
docker build -t wcannon/saltcheck .

# Once built we can run the image and drop to a shell
docker run --add-host=salt:127.0.0.1 --rm -it       \
    -v $(pwd)/salt:/srv/salt/                       \
    -v $(pwd)/pillar:/srv/pillar                    \
    -v $(pwd)/minion_config/minion:/etc/salt/minion \
    -v $(pwd)/sbin/docker:/opt/sbin                 \
    wcannon/saltcheck /bin/bash

# mapping the minion file to /etc/salt/minion means we don't need --local flag

salt-call saltutil.sync_modules

salt-call saltcheck -d

salt-call saltcheck.run_state_tests apache

salt-call saltcheck.run_highstate_tests
